

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.11. Atlases &mdash; GIS4Schools  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2. Data analysis with QGIS" href="../part2/part2.html" />
    <link rel="prev" title="1.10. Printing maps with QGIS" href="1_10.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> GIS4Schools
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="part1.html">1. Data visualization with QGIS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1_1.html">1.1. Introduction to GIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_2.html">1.2. Coordinate reference Systems, Projections, EPSG</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_3.html">1.3. GIS data modelling, Raster data, Vector data</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_4.html">1.4. Geopackage</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_5.html">1.5. Introduction to QGIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_6.html">1.6. QGIS interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_7.html">1.7. Mangage GeoPackages</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_8.html">1.8. QGIS visualization for vectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_9.html">1.9. QGIS visualization for rasters</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_10.html">1.10. Printing maps with QGIS</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.11. Atlases</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../part2/part2.html">2. Data analysis with QGIS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../part2/2_1.html">2.1. Introduction to Geospatial Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../part2/2_2.html">2.2. Accessing OGC services with QGIS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part2/2_2.html#wms-wmts">2.2.1. WMS/WMTS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2/2_2.html#wfs">2.2.2. WFS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2/2_2.html#wcs">2.2.3. WCS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part2/2_3.html">2.3. Extending QGIS functionalities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part2/2_3.html#id1">2.3.1. Processing toolbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2/2_3.html#id5">2.3.2. Plugins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part2/vector/vector.html">2.4. Vector processing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part2/vector/2_4_1.html">2.4.1. Map digitizing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2/vector/2_4_2.html">2.4.2. Attribute table: selection, editing and field calculator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2/vector/2_4_3.html">2.4.3. Join</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2/vector/2_4_4.html">2.4.4. Geoprocessing tools for vector data: dissolve</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2/vector/2_4_5.html">2.4.5. Geoprocessing tools for vector data: intersection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2/vector/2_4_6.html">2.4.6. Geoprocessing tools for vector data: buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2/vector/2_4_7.html">2.4.7. Rasterization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2/vector/2_4_8.html">2.4.8. Geoprocessing tools – Buffer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part2/raster/raster.html">2.5. Raster processing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../part2/raster/2_5_1.html">2.5.1. Reprojection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2/raster/2_5_2.html">2.5.2. Removing NoData</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2/raster/2_5_3.html">2.5.3. Raster calculator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2/raster/2_5_4.html">2.5.4. Vectorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2/raster/2_5_5.html">2.5.5. Clip raster with a mask, clip raster by extent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../part2/raster/2_5_6.html">2.5.6. Overlay statistics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../part2/2_6.html">2.6. Graphic modeler</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GIS4Schools</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="part1.html"><span class="section-number">1. </span>Data visualization with QGIS</a> &raquo;</li>
        
      <li><span class="section-number">1.11. </span>Atlases</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/part1/1_11.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="atlases">
<h1><span class="section-number">1.11. </span>Atlases<a class="headerlink" href="#atlases" title="Permalink to this headline">¶</a></h1>
<p>Now that you have seen the importance of both styling and map layout, Atlases can be introduced. The purpose of Atlases is to create many maps with the same template in an automatic way, saving a considerable amount of time in respect to a manual operation. QGIS Atlas allows you to create multiple maps using the records of a vector layer. After selecting a map layer as your index (coverage) layer, a page corresponding to each of its features is generated.  QGIS Atlas dynamically adapts the content of the different layout items to each feature in the index layer.</p>
<p>The following layers resulting from the previous steps will be now used to illustrate how to construct an Atlas:</p>
<ul class="simple">
<li>Municipalities_on_lakes_pop.gkpg (polygons representing the boundaries of the municipalities, including the Province and the Population attributes);</li>
<li>River_network.shp (lines representing the river network across the lakes basins);</li>
<li>Temperature_raster (raster representing the lakes surface water temperature).</li>
</ul>
<p>To start, add both Vector and Raster layers (<a class="reference internal" href="#id1"><span class="std std-numref">Fig. 1.11.1</span></a>, <strong>1</strong>) to your project. Before creating a new Layout, select the <em>Temperature_raster</em> in the <strong>Layers Panel (2)</strong> to modify its symbology. Instead of opening the layers properties, we can also right click on one of the upper toolbars and flag the box of the <strong>Layer Styling Panel (3)</strong> to visualize it on the right. From here you can modify the symbology of every layer keeping an eye on the map. Select the <em>Singleband Pseudocolor</em> representation from the drop-down menu <strong>(4)</strong> and modify the threshold values (10.75; 13.5; 16.5; 19.25; 22) to have a simpler and shorter legend later <strong>(5)</strong>. Select then the <em>River_Network</em> layer and set its symbology as in the example (light blue continuous line of 1mm width). Click then on the <strong>New Print Layout</strong> icon <strong>(6)</strong> to open the <strong>Create print layout Title</strong> window <strong>(7)</strong>. Define a title (“Atlas” in this the example) and press <strong>OK (8)</strong>.</p>
<p>A new window with the Layout interface will open (<a class="reference internal" href="#id2"><span class="std std-numref">Fig. 1.11.2</span></a>). Before approaching the Atlas logic, click on <strong>View</strong> (1) and then on <strong>Show Grid</strong> and <strong>Snap to Grid</strong> (2) to visualize a background grid and activate the snaps to its nodes. This will facilitate the creation of new items with appropriate spacing and alignments. In the Items column, click on the <strong>Atlas</strong> section among the four available <strong>(3)</strong>. After flagging <strong>Generate an Atlas (4)</strong> the <em>Configuration</em> and <em>Output</em> sub-sections will become editable and the <strong>Atlas Preview</strong> icon <strong>(5)</strong> visible. Select the <em>Municipalities</em> layer as <strong>Coverage layer (6)</strong> and its attribute <em>name</em> as <strong>Page name (7)</strong>. Please note that the coverage layer can only be a vector.</p>
<div class="figure align-default" id="id11">
<span id="id1"></span><img alt="../_images/1.11.1.jpg" src="../_images/1.11.1.jpg" />
<p class="caption"><span class="caption-number">Fig. 1.11.1 </span><span class="caption-text">– Add layers, change symbology and create a new layout</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id12">
<span id="id2"></span><img alt="../_images/1.11.2.jpg" src="../_images/1.11.2.jpg" />
<p class="caption"><span class="caption-number">Fig. 1.11.2 </span><span class="caption-text">– Grid view and snap, Atlas creation and settings</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</div>
<p>Refer to Fig 1.11.3 steps and result. Right clicking on a point on the white canvas <strong>(1)</strong> and select <strong>Page Properties (2)</strong>. In the <strong>Item Properties</strong> section <strong>(3)</strong> you have the possibility of changing page <strong>Size</strong> and <strong>Orientation (4)</strong>, choosing among international formats or defining customized measures. For this exercise, select an <em>A3 Landscape page</em>. After that, add to the layout all the items that you have seen in paragraph 1.9 (map, title, legend, scale bar and north arrow) as shown in the example.</p>
<div class="figure align-default" id="id13">
<span id="id3"></span><img alt="../_images/1.11.3.jpg" src="../_images/1.11.3.jpg" />
<p class="caption"><span class="caption-number">Fig. 1.11.3 </span><span class="caption-text">– Add items to layout and set page size</span><a class="headerlink" href="#id13" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id14">
<span id="id4"></span><img alt="../_images/1.11.4.jpg" src="../_images/1.11.4.jpg" />
<p class="caption"><span class="caption-number">Fig. 1.11.4 </span><span class="caption-text">– Atlas control on map item through item properties</span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</div>
<p>Now that the elements are in place it’s time to modify their properties to let the atlas control their content. Click on the white arrow in the left <em>Toolbox</em> to enter the <strong>Select/Move item</strong> mode (<a class="reference internal" href="#id4"><span class="std std-numref">Fig. 1.11.4</span></a>, <strong>1</strong>) and then click on the map <strong>(2)</strong>. In the Item properties section you are now able to change all the settings of the selected item. Flag the <strong>Controlled by Atlas</strong> checkbox <strong>(3)</strong> and select the first visualisation option among the three available below <strong>(4)</strong>. In this way, the map of every single page will be centred on the corresponding feature of the coverage layer (<em>Municipalities</em>), leaving a margin corresponding to the 25% of the image from the map frame, that can be activated flagging the <strong>Frame</strong> checkbox <strong>(5)</strong>.</p>
<p>We proceed with the Title (<a class="reference internal" href="#id5"><span class="std std-numref">Fig. 1.11.5</span></a>). As done before, select the title item on the map and look at the Item properties section. The default content is the <em>Lorem ipsum</em> text that has to be deleted. To make a dynamic title, adapting to the map content, we need to define it as an expression <strong>(2)</strong>. Open the <strong>Insert Expression</strong> window <strong>(3)</strong>, type in the expression space the following one <strong>(4)</strong> and press <strong>OK (5)</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>concat(“name”, ‘ (‘, “province”, ‘)’)
</pre></div>
</div>
<p>This expression literally means to write the <em>Municipality</em> name followed by the corresponding province between brackets. The “…” identify the field of a layer while the ‘…’ identify text strings. Finally go in the <em>Appearance</em> section and increase <strong>Font size</strong> up to 30 points <strong>(6)</strong>.</p>
<div class="figure align-default" id="id15">
<span id="id5"></span><img alt="../_images/1.11.5.jpg" src="../_images/1.11.5.jpg" />
<p class="caption"><span class="caption-number">Fig. 1.11.5 </span><span class="caption-text">– Atlas driven title by inserting an expression in it item properties</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</div>
<p>The other elements don’t need particular settings except some graphical preferences that can be defined later. Now the Atlas is properly set but the symbology of the layers is still independent from it. We now want to set a different symbology for the active feature of the <em>Municipalities</em> layer in respect to the other features of the same layer. Leave the <em>Layout</em> window and go back to the main <em>QGIS</em> one. Select the <em>Municipalities</em> layer in the <strong>Layer Panel (1)</strong> and in the Layer Styling Panel select a <strong>Rule Based Symbology</strong> (see <a class="reference internal" href="#id7"><span class="std std-numref">Fig. 1.11.7</span></a>, <strong>1</strong>). Add a <em>new rule</em> by clicking on the green <strong>+</strong> symbol <strong>(2)</strong> and double click on the record that appears <strong>(3)</strong> to enter the <strong>Edit Rule</strong> mode. You can now define a <strong>Label</strong> (<a class="reference internal" href="#id6"><span class="std std-numref">Fig. 1.11.6</span></a>, <strong>2</strong>, <em>Active</em>) and a criterion through an expression <strong>(3)</strong> for this rule. Click on the <strong>ε</strong> symbol to open the Expression String Builder window and type the following one <strong>(4)</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$id = @atlas_featureid
</pre></div>
</div>
<p>In this way the active atlas feature has been separated from the others and a dedicated symbology can be now defined in the <em>Symbol</em> section. Set <em>Fill style</em> as <em>no brush</em>, <em>Stroke colour</em> as <em>red</em> and <em>Stroke width</em> as <em>2mm</em> <strong>(5)</strong> and click on <strong>Apply (6)</strong>. On the map, you can now see a preview of the symbology for the active feature <strong>(7)</strong>.</p>
<div class="figure align-default" id="id16">
<span id="id6"></span><img alt="../_images/1.11.6.jpg" src="../_images/1.11.6.jpg" />
<p class="caption"><span class="caption-number">Fig. 1.11.6 </span><span class="caption-text">– Rule based symbology for vector layer, identifying atlas active feature</span><a class="headerlink" href="#id16" title="Permalink to this image">¶</a></p>
</div>
<p>Refer to <a class="reference internal" href="#id7"><span class="std std-numref">Fig. 1.11.7</span></a> steps and results. Repeat the same operation to set another symbology for the remaining features. In this case, the expression will be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$id is not @atlas_featureid
</pre></div>
</div>
<p>The symbology will be instead a solid white <em>Fill</em> with <em>80% opacity</em>, to be set directly in the colour definition, with a <em>black continuous stroke</em> of <em>0.5mm</em> of <em>width</em>. As now we have different symbologies within the same layer, we may need to define which of the two should be represented first. Click on <strong>Symbol Levels (4)</strong> and type <em>1</em> for the active layer, leaving <em>0</em> for the other. In this way, the active layer will be drawn later, going so on the top of the others <strong>(5)</strong>.</p>
<div class="figure align-default" id="id17">
<span id="id7"></span><img alt="../_images/1.11.7.jpg" src="../_images/1.11.7.jpg" />
<p class="caption"><span class="caption-number">Fig. 1.11.7 </span><span class="caption-text">– Rule based symbology, symbol levels definition for visualisation priority</span><a class="headerlink" href="#id17" title="Permalink to this image">¶</a></p>
</div>
<p>The same logic can be applied to the visualisation of Labels. In <a class="reference internal" href="#id8"><span class="std std-numref">Fig. 1.11.8</span></a> is shown how to insert a <strong>Description (1</strong>, Pop <strong>)</strong>, a <strong>Filter</strong> or criterion for the rule <strong>(2</strong>, <em>expression [2]</em> <strong>)</strong> and in the <em>Labels</em> section, the content of the label with a <strong>Value (3)</strong> choosing the <em>population</em> attribute from the drop-down menu. In the <strong>Text</strong> section <strong>(4)</strong> modify the <em>Size</em> setting it to 20 points and in the <strong>Background</strong> section <strong>(5)</strong> flag the <strong>Draw Background</strong> checkbox <strong>(6)</strong> and define the Size on <em>X</em> and <em>Y</em> direction for the buffer <strong>(7</strong>, 2mm <strong>)</strong>. In this way, a rectangular white box slightly exceeding the label text will be generated, as visible on the map <strong>(8)</strong>. Before going back to the <em>Layout</em>, we can add a background map. Click on the <em>XYZ Tiles</em> in the <em>Browser panel</em> and right click on <strong>OpenStreetMap (9)</strong> to <em>Add</em> the layer <em>to the project</em>. It will appear both on the map and on the <strong>Layer Panel (10)</strong> where it has to be moved at the bottom of the list. Finally, move the <em>Municipalities</em> layer at the top of the list, above <em>Temperature_raster</em>.</p>
<p>To conclude the exercise, go back to the <em>Layout</em> and define the properties of the remaining items starting from the <strong>Legend</strong> (<a class="reference internal" href="#id9"><span class="std std-numref">Fig. 1.11.9</span></a> a). Select it <strong>(1)</strong>, add <em>Legend</em> as <strong>Title (2)</strong> and set its <strong>Size</strong> to <em>24</em> <strong>(3)</strong>, the <em>sub-headings</em> one to <em>18</em> <strong>(4)</strong> and the <em>item</em> one to <em>14</em>.</p>
<p>Similarly, select the <strong>Scale bar (1)</strong> and modify its style to <em>Line Ticks Up</em> <strong>(2)</strong> and increase its <strong>Font</strong> size to <em>14</em> points (<a class="reference internal" href="#id9"><span class="std std-numref">Fig. 1.11.9</span></a> b).</p>
<div class="figure align-default" id="id18">
<span id="id8"></span><img alt="../_images/1.11.8.jpg" src="../_images/1.11.8.jpg" />
<p class="caption"><span class="caption-number">Fig. 1.11.8 </span><span class="caption-text">– Rule based label and add OpenStreetMap as background</span><a class="headerlink" href="#id18" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id19">
<span id="id9"></span><img alt="../_images/1.11.9.jpg" src="../_images/1.11.9.jpg" />
<p class="caption"><span class="caption-number">Fig. 1.11.9 </span><span class="caption-text">– a) Legend properties edit; b) Scale bar properties edit</span><a class="headerlink" href="#id19" title="Permalink to this image">¶</a></p>
</div>
<p>The Atlas is finally complete. To start navigating its pages click on the <strong>Preview Atlas</strong> icon <strong>(1)</strong> and use the arrows <strong>(2)</strong> to move one or all step backward or forward. Alternatively you can directly select from the drop-down menu <strong>(3)</strong> the specific page that you are looking for. This result can be easily exported as <em>.pdf</em>, <em>.svg</em> and <em>.jpg</em> clicking on the <strong>Export Atlas</strong> icon on the right <strong>(4)</strong>.</p>
<div class="figure align-default" id="id20">
<span id="id10"></span><img alt="../_images/1.11.10.jpg" src="../_images/1.11.10.jpg" />
<p class="caption"><span class="caption-number">Fig. 1.11.10 </span><span class="caption-text">– Atlas preview, navigation through pages and output generation</span><a class="headerlink" href="#id20" title="Permalink to this image">¶</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../part2/part2.html" class="btn btn-neutral float-right" title="2. Data analysis with QGIS" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="1_10.html" class="btn btn-neutral float-left" title="1.10. Printing maps with QGIS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Maria A. Brovelli, Daniele Oxoli, Carlo Biraghi, Gorica Bratic, Chiara Gerosa, Alberto Vavassori

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>